<!DOCTYPE html>
<html>
<head>
    <title>Dashboard</title>

    <style>
        body { background:#eef2f7; font-family:Arial; }
        .container {
            width:600px; margin:auto; margin-top:40px;
            background:white; padding:25px;
            border-radius:10px; box-shadow:0 0 10px rgba(0,0,0,0.1);
        }
        input, textarea {
            width:100%; padding:10px; margin:8px 0;
            border:1px solid #ccc; border-radius:5px;
        }
        button {
            padding:10px 20px; background:#007bff;
            color:white; border:0; border-radius:5px; cursor:pointer;
            width:100%;
        }
        #logout {
            margin-top:10px; background:red;
        }
    </style>

    <script>
        function sendMail() {

            let btn = document.getElementById("sendBtn");
            btn.innerText = "Sending...";
            btn.style.background = "#444";
            btn.disabled = true;

            fetch("/send", {
                method: "POST",
                body: new FormData(document.getElementById("mailForm"))
            })
            .then(res => res.json())
            .then(data => {

                alert(
                    "Total: " + data.total +
                    " | Success: " + data.success +
                    " | Failed: " + data.failed
                );

                btn.innerText = "Send Emails";
                btn.style.background = "#007bff";
                btn.disabled = false;

                // ❌ NO RESET — fields stay filled
            });
        }
    </script>

</head>
<body>

<div class="container">

    <h2>Bulk Email Launcher</h2>

    <form id="mailForm" onsubmit="event.preventDefault(); sendMail();">

        <input type="text" name="sender_name" placeholder="Sender Name" required>
        <input type="email" name="sender_email" placeholder="Your Gmail" required>
        <input type="password" name="sender_pass" placeholder="App Password" required>

        <textarea name="recipients" placeholder="Email IDs separated by comma" rows="5" required></textarea>

        <button id="sendBtn">Send Emails</button>

    </form>

    <a href="/logout"><button id="logout">Logout</button></a>

</div>

</body>
</html>
