<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Email Sender Dashboard</title>

    <style>
        body {
            font-family: Arial, sans-serif;
            background: #111;
            color: #fff;
            margin: 0;
            padding: 0;
        }

        .container {
            width: 60%;
            margin: 40px auto;
            background: #1c1c1c;
            padding: 25px;
            border-radius: 12px;
            box-shadow: 0 0 20px #000;
        }

        h2 {
            text-align: center;
            margin-bottom: 20px;
            color: #36e2ff;
        }

        label {
            font-size: 17px;
            margin-top: 15px;
            display: block;
        }

        input, textarea {
            width: 100%;
            padding: 12px;
            margin-top: 6px;
            border: none;
            border-radius: 8px;
            background: #222;
            color: #fff;
            font-size: 15px;
        }

        textarea {
            height: 150px;
        }

        button {
            width: 100%;
            padding: 14px;
            margin-top: 20px;
            font-size: 17px;
            background: #00c3ff;
            color: #000;
            font-weight: bold;
            border: none;
            border-radius: 10px;
            cursor: pointer;
        }

        button:hover {
            background: #05e1ff;
        }

        /* Loading Spinner */
        .loading {
            display: none;
            text-align: center;
            margin-top: 20px;
        }

        .spinner {
            border: 5px solid #333;
            border-top: 5px solid #00d9ff;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            margin: auto;
            animation: spin 0.8s linear infinite;
        }

        @keyframes spin {
            100% { transform: rotate(360deg); }
        }

        /* Success Popup */
        .popup {
            display: none;
            position: fixed;
            top: 30%;
            left: 50%;
            transform: translate(-50%, -50%);
            padding: 25px;
            background: #0f0;
            color: #000;
            border-radius: 10px;
            font-size: 20px;
            text-align: center;
            box-shadow: 0 0 20px #000;
        }
    </style>

</head>
<body>

<div class="container">
    <h2>ðŸ“¨ Fast Bulk Email Sender</h2>

    <label>Subject</label>
    <input type="text" id="subject" placeholder="Enter subject...">

    <label>Message</label>
    <textarea id="message" placeholder="Enter message..."></textarea>

    <label>Email List (Line by Line)</label>
    <textarea id="emails" placeholder="one@email.com
two@gmail.com
three@yahoo.com"></textarea>

    <button onclick="sendEmails()">Send Emails</button>

    <div class="loading" id="loadingBox">
        <div class="spinner"></div>
        <p>Sending emails, please wait...</p>
    </div>
</div>

<!-- Success Popup -->
<div class="popup" id="popupBox">
    âœ” Emails Sent Successfully!
</div>

<script>
function sendEmails() {

    let subject = document.getElementById("subject").value.trim();
    let message = document.getElementById("message").value.trim();
    let emails = document.getElementById("emails").value.trim();

    if (!subject || !message || !emails) {
        alert("Please fill all fields!");
        return;
    }

    document.getElementById("loadingBox").style.display = "block";

    fetch("/send-mails", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
            subject: subject,
            message: message,
            emails: emails
        })
    })
    .then(res => res.json())
    .then(data => {
        document.getElementById("loadingBox").style.display = "none";

        if (data.status === "success") {
            showPopup("âœ” Emails Sent Successfully!");
        } else {
            showPopup("âŒ Error: " + data.error);
        }
    });
}

function showPopup(msg) {
    const popup = document.getElementById("popupBox");
    popup.innerHTML = msg;
    popup.style.display = "block";
    
    setTimeout(() => {
        popup.style.display = "none";
    }, 3000);
}
</script>

</body>
</html>
